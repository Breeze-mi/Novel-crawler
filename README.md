# Novel Reader Pro

## 项目简介

这是一个基于 Python 的小说阅读器,使用 PySide6 提供图形用户界面，旨在帮助用户从在线小说网站抓取小说内容，并提供本地阅读和管理功能。项目支持从多个网站抓取小说，并允许用户删除书籍及其缓存文件。

## 主要功能

- 从指定小说网站抓取小说章节内容。
- 本地阅读已请求下载的小说。
- 管理已下载的小说，包括删除书籍及其关联的缓存文件。
- 支持自定义搜索框长度。
- 支持滚轮自动切换章节。
- 适配不同的网站解析逻辑，基本支持所有基于笔趣阁二开的小说网站。

## 免责声明

**本项目仅供个人学习与研究之用，不涉及任何商业用途。所有内容均来源于互联网，请用户务必尊重原作者的版权。在使用本工具进行内容抓取时，请务必适度，避免对目标网站造成过大的访问压力和负载。请在下载后 24 小时内自行删除，并自觉遵守相关法律法规。对于用户因不当使用本项目而产生的任何版权纠纷、法律责任或对第三方网站造成的任何影响，本项目作者概不负责。**

## 安装

1.  **克隆仓库**

    ```bash
    git clone https://github.com/Breeze-mi/Novel-crawler.git
    cd Novel-crawler
    ```

2.  **创建并激活虚拟环境**

    ```bash
    python -m venv .venv
    # Windows
    .venv\Scripts\activate
    # macOS/Linux
    source .venv/bin/activate
    ```

3.  **安装依赖**

    ```bash
    pip install -r requirements.txt
    ```

4.  **配置搜索功能（可选）**

    如果需要使用在线搜索功能：

    - 首次使用时点击"搜索书籍"按钮
    - 点击"配置 Cookie"按钮
    - 通过官网 CF 认证后，获取 cf_clearance 并粘贴
    - 配置并保存 Cookie

## 使用方法

激活虚拟环境后，运行主程序：

```bash
python novel_reader_pro.py
```

### 搜索并导入书籍（新增）

1. 点击左侧的"搜索书籍"按钮
2. 首次使用点击"配置 Cookie"按钮
3. 获取并配置 cf_clearance
4. 输入书名或作者名
5. 从搜索结果中选择要导入的书籍
6. 确认版权提醒后自动导入

### 手动导入书籍

程序启动后，在界面中输入小说详情页网址进行抓取和阅读。

### 键盘快捷键

- `←` / `PageUp`: 上一章
- `→` / `PageDown`: 下一章
- `Ctrl+F`: 聚焦搜索框
- `Ctrl+D`: 切换夜间模式

**搜索功能说明**：

- Cookie 方案，速度快（2-3 秒）
- 首次使用需要配置 Cookie=cf_clearance

## 依赖

项目依赖于 `requirements.txt` 中列出的库，主要包括：

- `PySide6`: 用于构建图形用户界面。
- `requests`: 用于发送 HTTP 请求，抓取网页内容。
- `beautifulsoup4`: 用于解析 HTML 内容。
- `lxml`: 一个快速的 XML/HTML 处理库。

## 打包成可执行文件 (可选)

### 快速打包

使用 `PyInstaller` 将项目打包成独立的可执行文件，无需用户安装 Python。

#### 1. 安装 PyInstaller

```bash
pip install pyinstaller
```

#### 2. 执行打包命令

```bash
# 简单打包（推荐）
pyinstaller --onefile --windowed --name "小说阅读器" novel_reader_pro.py

# 或带图标打包
pyinstaller --onefile --windowed --name "小说阅读器" --icon=icon.ico novel_reader_pro.py
```

#### 3. 获取可执行文件

打包完成后，可执行文件位于：

```
dist/小说阅读器.exe
```

### 详细打包指南

完整的打包说明（包括高级配置、问题解决、性能优化等）请参考：

📖 **[打包成可执行文件完整指南](打包成可执行文件.md)**

该文档包含：

- ✅ 三种打包方法（简单、完整、高级）
- ✅ 应用图标制作
- ✅ 常见问题解决
- ✅ 自动化打包脚本
- ✅ 性能优化建议
- ✅ 分发检查清单

### 打包参数说明

| 参数         | 说明                   | 示例                  |
| ------------ | ---------------------- | --------------------- |
| `--onefile`  | 打包成单个 .exe 文件   | `--onefile`           |
| `--windowed` | 隐藏控制台窗口         | `--windowed`          |
| `--name`     | 设置可执行文件名称     | `--name "小说阅读器"` |
| `--icon`     | 设置应用图标           | `--icon=icon.ico`     |
| `--onedir`   | 打包成文件夹（启动快） | `--onedir`            |

### 打包后的使用

打包完成后，用户可以直接运行 `.exe` 文件，无需：

- 安装 Python
- 安装依赖包
- 配置虚拟环境

**首次启动**可能较慢（需要解压），后续启动会快速。

---

# To-Do List

- [ ] 实现切换选择不同的小说源站，同时接入使用不同的小说源站的搜索功能

- ~~[x] 优化章节解析获取逻辑，提高解析准确性，解决章节丢失问题~~ (已完成)
- [ ] 完善对笔趣阁二开网站的支持，增加对其他小说网站的解析逻辑和支持
- [ ] 后期可以手动导入小说源站，增加对其他未被支持的小说网站的解析功能
- [ ] 支持更多搜索源（起点、纵横等）
- ~~[x] 优化界面布局，提升用户体验~~ (已完成)
